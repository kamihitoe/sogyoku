{{/* 获取传入的 section 参数 */}}
{{ $section := .Get "section" }}
{{ $title := .Get "title" }}
{{ $pages := where site.RegularPages "Section" $section }}

{{ if gt (len $pages) 0 }}
<!-- 容器：使用 sp- 前缀代表 section-preview -->
<div class="sp-wrapper">
  
  <!-- 标题栏 -->
  <div class="sp-header">
    <h2 class="sp-title">
      <span class="sp-icon">#</span> 
      <a href="/{{ $section }}/">{{ $title }}</a>
    </h2>
    <a href="/{{ $section }}/" class="sp-more-link">查看全部 →</a>
  </div>

  <!-- 文章网格 -->
  <div class="sp-grid">
    {{/* 取前 3 篇文章 */}}
    {{ range first 3 $pages }}
      <a href="{{ .RelPermalink }}" class="sp-card">
        <!-- 文章标题 -->
        <h3 class="sp-card-title">{{ .Title }}</h3>
        
        <!-- 日期 -->
        <div class="sp-card-date">{{ .Date.Format "2006/1/2" }}</div>

        <!-- 摘要 -->
        <div class="sp-card-summary">
          {{ if .Description }}
            {{ .Description }}
          {{ else }}
            {{ .Summary | plainify | htmlUnescape }}
          {{ end }}
        </div>
      </a>
    {{ end }}
  </div>
</div>
{{ end }}